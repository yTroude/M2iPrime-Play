#{extends 'main.html'/}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="@{controllers.auth.Auth.index()}">M2iPrime</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav ml-auto dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropDownMainMenu" data-toggle="dropdown">
            #{if session.contains("profilActif")}}
                <img height="30px" width="30px" src="/public/images/avatars/${profils.get(session.get("profilActif"))}">
            #{/if}
            #{else}
                Menu
            #{/else}
            </button>
            <div class="dropdown-menu">
            #{if session.contains("profilActif")}
                #{list profils.entrySet(), as:'profil'}
                    #{if !session.get("profilActif").equals(profil.pseudo)}
                        <a class="dropdown-item" href="@{auth.Auth.changerProfilActif(profil.pseudo)}">
                            <img height="30px" width="30px" src="/public/images/avatars/${profil.avatar}">
                        ${profil.pseudo}
                        </a>
                    #{/if}
                #{/list}
                <div class="dropdown-divider"></div>
            #{/if}
                <a class="dropdown-item" href="@{auth.Profil.profils()}">Gérer vos profils</a>
                <a class="dropdown-item" href="@{auth.Auth.gestionCompte()}">Compte & Abonnement</a>
                <a class="dropdown-item" href="@{Secure.logout()}">Déconnexion</a>
            </div>

        </div>
    </div>
</nav>

<div class="container">
    <div class="col">
    #{doLayout /}
    </div>
</div>